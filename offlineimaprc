[general]
ui = ttyui
accounts = ghickman
pythonfile = ~/.mutt/offlineimap.py
fsync = False

[Account ghickman]
localrepository = ghickman-local
remoterepository = fastmail
status_backend = sqlite
postsynchook = /usr/local/bin/notmuch new

[Repository ghickman-local]
type = Maildir
localfolders = ~/.mail/george-ghickman.co.uk
nametrans = lambda folder: {
                'archive':      'INBOX.Archive',
                'drafts':       'INBOX.Drafts',
                'ghickman-ltd': 'INBOX.ghickman-ltd',
                'pyconuk-adm':  'INBOX.pyconuk-adm',
                'sent':         'INBOX.Sent Items',
                'spam':         'INBOX.Spam',
                'templates':    'INBOX.templates',
                'trash':        'INBOX.Trash',
            }.get(folder, folder)

[Repository fastmail]
maxconnections = 1
type = IMAP
remotehost = mail.messagingengine.com
remoteport = 993
remoteuser = george@ghickman.co.uk
remotepasseval = get_keychain_pass(account="george@ghickman.co.uk", server="mail.messagingengine.com")
ssl = yes
sslcacertfile = ~/.mutt/cacert.pem
nametrans = lambda folder: {
                'INBOX.Archive':      'archive',
                'INBOX.Drafts':       'drafts',
                'INBOX.ghickman-ltd': 'ghickman-ltd',
                'INBOX.pyconuk-adm':  'pyconuk-adm',
                'INBOX.Sent Items':   'sent',
                'INBOX.Spam':         'spam',
                'INBOX.templates':    'templates',
                'INBOX.Trash':        'trash',
            }.get(folder, folder)
folderfilter = lambda folder: folder not in [
                    'INBOX.Junk Mail',
                    'INBOX.Spam',
                    'INBOX.Trash',
                ]
