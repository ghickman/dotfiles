# autoenv
source /usr/local/Cellar/autoenv/0.1.0/activate.sh

# virtualenvwrapper
export WORKON_HOME=~/.venvs
export PROJECT_HOME=~/Projects
export VIRTUALENVWRAPPER_SCRIPT=/usr/local/bin/virtualenvwrapper.sh
source /usr/local/bin/virtualenvwrapper_lazy.sh

# make a python virtualenv with extra options
function mkvenv {
    name=""
    if [ "${1}" == "" ]; then
        PWD=`pwd`
        name=`basename $PWD`
        echo "Name not specified, using current dir: $name"
    else
        name=${1}
    fi

    mkvirtualenv $name --distribute

    # make a .env in the current directory for autoenv magic
    echo "workon $name" > .env

    # symlink the venv to the current dir
    ln -s "$WORKON_HOME/$name" .venv
    echo "Symlinked $WORKON_HOME/$name to ./.venv"

    # using mkvirtualenv this way seems to break workon
    workon $name
}

