#!/bin/sh

set -eu

# Make sure the index is dirty, otherwise there isn't anything to fixup
git is-dirty -i

sha=$(git log --pretty='%h %s' | fzf | cut -d' ' -f1)

git commit --fixup "$sha" && git rebase --interactive --autosquash "$sha"^
